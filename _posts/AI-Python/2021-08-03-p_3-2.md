---
title:  "[부스트캠프 AI Tech / Day2] Pythonic code"

categories:
  - Python for AI
tags:
  - Python
toc: true
toc_sticky: true
 
date: 2021-08-03
last_modified_at: 2021-08-07
---

# Pythonic code  
<br>

* 파이썬 스타일의 코딩 기법  
* 파이썬 특유의 문법을 활용    
## Split  
* string type의 값을 "기준값"으로 나눠서 List 형태로 변환  
```python
a = 'I love  U'.split() # ['I','love','U']
a = 'I love  U'.split() # ['I','love','','U']
```  
## Join  
* String으로 구성된 list를 하나의 string으로 반환  
```python
num_list = ['one','two','three']
result = ''.join(num_list) # result = onetwothree
result = ' '.join(num_list) # result = one two three
```  
## List comprehension  
* 일반적으로 for + appened 보다 속도가 빠름  
```python
a_list = [i for i in range(5)] # [0,1,2,3,4]
b_list = "abc"
c_list = "dea"
result = [i+j for i in b_list for j in c_list]
# result ['ad','ae','aa','bd','be','ba,'cd','ce','ca']
result = [[i+j for i in b_list] for j in c_list]
#result [['ad','bd',cd'],['ae','be','ce'],['aa','ba','ca']]
result = [i+j for i in b_list for j in c_list if not(i==j)]
# result ['ad','ae','bd','be','ba','cd','ce','ca'] 
```  
<br>  

## enumerate & zip  
* enumerate : list의 element를 추출할 때 번호를 붙여서 추출  
```python
for i, v in enumerate(['a','b','c']):
	print(i,v)
# 0 a
# 1 b
# 2 c
mlist = ['a','b','c','d']
list(enumerate(mlist))
#[(0,'a'), (1,'b'), (2,'c'), (3,'d')]
```  

* zip : 두 개의 list의 값을 병렬적으로 추출함  
```python
a_l = ['a','b','c']
b_l = ['d','e','f']
for a, b in zip(a_l,b_l):
	print(a,b)
# a d
# b e
# c f
[sum(x) for x in zip((1,1,1), (2,2,2), (3,3,3))]
#[6,6,6]
```  

* enumerate & zip 동시 사용  
```python
a_l = ['a','b','c']
b_l = ['d','e','f']
for i, (a,b) in enumerate(zip(a_l, b_l)):
	print(i, a, b)
# 0 a d
# 1 b e
# 2 c f
```  

## lambda & map & reduce  
* lambda : 함수 이름 없이, 함수처럼 쓸 수 있는 익명함수  
	* python3  부터는 권장하지는 않으나 여전히 많이 쓰임  
		* 테스트의 어려움  
		* 문서화 docstring 지원 미비  
```python
f = lambda x, y: x+y
print(f(1,4))
```  

* map function  
	* list를 붙여줘야 list 사용가능  
	* 실행시점에 값을 생성  
	* 메모리 효율적  
```python
a_l = [1,2,3]
f = lambda x,y: x+y
print(list(map(f,a_l,a_l))) # [2,4,6]
```  
* reduce : map function과 달리 list에 똑같은 함수를 적용해서 통합  
```python
from functools import reduce
print(reduce(lambda x, y: x+y, [1,2,3])) # 6
```  
<br>

## Iterable object  
* Sequence형 자료형에서 데이터를 순서대로 추출하는 object  
* 내부적 구현으로 __iter__ , __next__ 사용  
```python
for i in ["a", "b", "c"]:
	print(i, end='\t')	   # a    b    c
```  
```python
a_l = ['a','b','c']
iter_ob = iter(a_l)
print(next(iter_ob))	#a
print(next(iter_ob))	#b
print(next(iter_ob))	#c
```  
## generator  
* element가 사용되는 시점에 값을 메모리에 반환  
	* 그전엔 주소값만 가지고 있음  
* :yield를 사용해 한번에 하나의 element만 반환  
```python
def num_gen():
	yield 0 # 0을 함수 바깥으로 전달하고 코드 실행을 함수 바깥에 양보
	yield 1 # 1을 함수 바깥으로 전달하고 코드 실행을 함수 바깥에 양보
	yield 2 # 2를 함수 바깥으로 전달하고 코드 실행을 함수 바깥에 양보
```  
```python
g = num_gen()
a = next(g)
print(a) # 0
b = next(g)
print(b) # 1
c = next(g)
print(c) # 2
```  
* generator 형태의 list 생성  
	* [] 대신 ()를 사용하여 표현  
	* 일반적인 iterator는 generator에 비해 훨씬 큰 메모리 용량 사용  
	* 큰 데이터를 처리할 때는 generator expression을 고려  
	* 파일 데이터를 처리할 때도 generator 쓸수 있음   
``` python
g_ex = (i*i for i in range(5))
print(type(g_ex))	#<class 'generator'>
print(g_ex)		# <generator object <genexpr> at 0x000002198E9DE148>
value = next(g_ex)
print(value)	#0
value = next(g_ex)
print(value)	#1
```  
## function passing arguments  
### Keyword arguments  
* 함수에 입력되는 parameter의 변수명을 사용  
```python
def print_int(a, b):
	print(a,b)
```  
```python
print_int(a=2,b=3)	# 2 3
```  
### Default arguments  
* parameter의 기본 값을 사용  
```python
def print_int(a,b=1):
	print(a,b)
```  
```python
print_int(2)	# 2 1
```  
<br>

### variable-length asterisk  
* ' * ' 기호를 사용하여 함수의 parameter를 표시  
* 기존 parameter 이후에 나오는 값을 tuple로 저장  
* 가변인자는 오직 한 개만 맨 마지막 parameter 위치에 사용 가능  
```python
def add_some(a, b, *args):
	return a+b+sum(args)
```  
```python
print(add_some(1,2,3,4,5,6,7))	# 28
```  
### Keyword variable-length  
* parameter 이름을 따로 지정하지 않고 입력하는 방법
* ' ** ' 를 사용하여 함수의 parameter를 표시  
* 입력된 값은 dict type으로 사용가능  
* 기존 가변인자 다음에 사용  
```python
def kw_t(a, *args, **kargs):
	print(a+sum(args))
	print(kargs)
```  
```python
kw_t(1,2,3,f=7,g=8,h=9)	# 6 {'f': 7, 'g': 8, 'h': 9}
```  
### unpacking a container  
* 자료형에 들어가 있는 값을 unpacking  
```python
d = ([1,2],[3,4])
print(*d) # 1개는 sequence	 [1, 2] [3, 4]
def a_test(a,b):
	print(a,b)
```  
```python
e = {"a":1, "b":2}
a_test(**e) # 2개는 dict	1 2
```  
